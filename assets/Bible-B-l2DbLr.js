import{u as A,a as I,c as h,b as S,d as u,i as f,S as y,e as N,f as _,s as w,g as D,t as d,T as F,F as z}from"./index-D738Pesu.js";import{l as P,A as j}from"./logo-DhbUSdG1.js";const E={};async function V(e,s){if(!E[e]){const r=`/bible-web/${s}/${e}.json`;try{const t=await fetch(r);if(!t.ok)throw new Error(`Erro: ${t.status} ${t.statusText}`);const n=await t.json();E[e]=n}catch(t){return console.error("Erro ao buscar dados da Bíblia:",t),console.log(r),{error:t instanceof Error?t.message:"Erro desconhecido ao buscar dados da Bíblia."}}}return E[e]}async function R(e,s,r,t="static/bible/json"){if(!e||!s||r<=0||!Number.isInteger(r))return{error:"Parâmetros inválidos. Verifique a versão, livro e capítulo."};const n=await V(e,t);if("error"in n)return n;const a=n.find(b=>b.abbrev===s);if(!a)return{error:"Livro não encontrado."};if(r>a.chapters.length)return{error:"Capítulo não encontrado."};const c=a.chapters[r-1]||[];return{book:a.name,verses:c}}async function q(e,s,r="static/bible/json"){const t=await V(e,r);if("error"in t)return 0;const n=t.find(a=>a.abbrev.toLowerCase()===s.toLowerCase()||a.name.toLowerCase()===s.toLowerCase());return n?n.chapters.length:0}async function T(e,s="static/bible/json"){const r=await V(e,s);return"error"in r?r:r.map(n=>({abbrev:n.abbrev,name:n.name}))}const M="_verseNumber_1w6gc_1",U="_selector_1w6gc_1",G="_version_1w6gc_1",H="_center_1w6gc_1",J="_content_1w6gc_1",B={verseNumber:M,selector:U,version:G,center:H,content:J};var K=d("<p class=verse>"),O=d("<h1>"),Q=d("<div>"),W=d("<p>No verses found."),X=d('<div><div><img width=50px alt="Bible Logo"><br></div><div><select name=book></select><input type=number name=chapter min=1>'),Y=d("<option>"),Z=d("<button>Next Chapter."),p=d("<div><main><article>"),ee=d("<em>Loading..."),re=d("<button>Read full chapter.");const L=e=>{const s=e.url?`${e.url}${e.number}`:`#${e.number}`;return(()=>{var r=K();return f(r,u(j,{get class(){return B.verseNumber},href:s,onClick:()=>e.onClick?.(e.number),get children(){return e.number}}),null),f(r,()=>"  "+e.text,null),r})()},te=e=>{const[s,r]=h();S(()=>{(async()=>{const n=await R(e.version,e.book,e.chapter);"error"in n?console.log("Erro em getBibleVerses():",n.error):r(n)})()});const t=[N(()=>s()?.book)," ",N(()=>e.chapter),N(()=>e.verse?`:${e.verse}`:"")," ",N(()=>e.version.toUpperCase())];return(()=>{var n=Q();return f(n,u(y,{get when(){return s()},get children(){return[u(F,{children:t}),(()=>{var a=O();return f(a,t),a})(),u(y,{get when(){return e.verse>0},get children(){return u(L,{get text(){return s().verses[e.verse-1]||"Verse not found."},get number(){return e.verse}})}}),u(y,{get when(){return e.verse===0},get children(){return u(z,{get each(){return s().verses},get fallback(){return W()},children:(a,c)=>u(L,{get number(){return c()+1},text:a,get url(){return`/bible-web/${e.version}/${e.book}/${e.chapter}/`},get onClick(){return e.onVerseClick}})})}})]}})),_(()=>w(n,"id",B.chapter)),n})()},ne=e=>{const[s,r]=h([]),[t,n]=h(0);return S(()=>{(async()=>{const c=await T(e.version);if("error"in c)console.error("Error in getAllBooks():",c.error);else{r(c);const b=c.findIndex($=>$.abbrev===e.book);n(b>=0?b:0)}})()}),(()=>{var a=X(),c=a.firstChild,b=c.firstChild;b.nextSibling;var $=c.nextSibling,g=$.firstChild,C=g.nextSibling;return w(b,"src",P),f(c,u(j,{get href(){return`/bible-web/${e.version}/${t()}/${e.chapter}/${e.verse+"/"||""}select_version`},children:"Change version."}),null),g.addEventListener("change",o=>{const l=o.currentTarget.value;e.onchange(l)}),f(g,u(z,{get each(){return s()},children:o=>(()=>{var l=Y();return f(l,()=>o.name),_(()=>l.selected=e.book===o.abbrev),_(()=>l.value=o.abbrev),l})()})),C.addEventListener("change",o=>{const l=Number(o.currentTarget.value);!isNaN(l)&&l>=1&&l<=e.bookSize?e.onchange(void 0,l):o.currentTarget.value=e.chapter.toString()}),_(o=>{var l=B.selector,x=B.version,i=B.center,v=e.disabled,k=e.bookSize,m=e.disabled;return l!==o.e&&w(a,"id",o.e=l),x!==o.t&&w(c,"id",o.t=x),i!==o.a&&w($,"id",o.a=i),v!==o.o&&(g.disabled=o.o=v),k!==o.i&&w(C,"max",o.i=k),m!==o.n&&(C.disabled=o.n=m),o},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),_(()=>g.value=e.book),_(()=>C.value=e.chapter),a})()},se=()=>{const e=A(),s=I(),[r]=h(e.version||"en_kjv"),[t,n]=h(e.book||"gn"),[a,c]=h(Number(e.chapter)||1),[b,$]=h(Number(e.verse)||0),[g,C]=h(0),[o,l]=h(!0);S(async()=>{l(!0);try{const i=Number(t());if(!isNaN(i)){const k=await T(r());"error"in k||n(k[i]?.abbrev||t())}const v=await q(r(),t());C(v),v||console.error("Failed to fetch book size.")}catch(i){console.error("Error:",i)}finally{l(!1)}}),S(()=>{s(`/bible-web/${r()}/${t()}/${a()}/${b()||""}`)});function x(i,v){i&&n(i),c(v||1)}return u(y,{get when(){return!o()},get fallback(){return(()=>{var i=ee();return i.style.setProperty("color","gray"),i})()},get children(){return[u(ne,{get version(){return r()},get book(){return t()},get bookSize(){return g()},get chapter(){return a()},get verse(){return b()},onchange:x,get disabled(){return b()!==0}}),(()=>{var i=p(),v=i.firstChild,k=v.firstChild;return f(k,u(te,{get version(){return r()},get book(){return t()},get chapter(){return a()},get verse(){return b()},onVerseClick:$})),f(i,u(y,{get when(){return N(()=>typeof g()=="number"&&a()<g())()&&b()===0},get fallback(){return(()=>{var m=re();return m.$$click=()=>$(0),m})()},get children(){var m=Z();return m.$$click=()=>c(a()+1),m}}),null),_(()=>w(i,"id",B.content)),i})()]}})};D(["click"]);export{se as default};
