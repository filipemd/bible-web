import{d as z,s as h,c as f,a as D,t as b,u as H,b as I,e as m,f as C,g as l,i as v,S as x,h as L,T as M,F as T}from"./index-DnsqxruV.js";import{l as F,A as j}from"./logo-BGg93dQk.js";const N={};async function B(e,i){if(!N[e]){const r=`/bible-web/${i}/${e}.json`;try{const n=await fetch(r);if(!n.ok)throw new Error(`Erro: ${n.status} ${n.statusText}`);const o=await n.json();N[e]=o}catch(n){return console.error("Erro ao buscar dados da Bíblia:",n),console.log(r),{error:n instanceof Error?n.message:"Erro desconhecido ao buscar dados da Bíblia."}}}return N[e]}async function P(e,i,r,n="static/bible/json"){if(!e||!i||r<=0||!Number.isInteger(r))return{error:"Parâmetros inválidos. Verifique a versão, livro e capítulo."};const o=await B(e,n);if("error"in o)return o;const s=o.find(u=>u.abbrev===i);if(!s)return{error:"Livro não encontrado."};if(r>s.chapters.length)return{error:"Capítulo não encontrado."};const c=s.chapters[r-1]||[];return{book:s.name,verses:c}}async function Z(e,i,r="static/bible/json"){const n=await B(e,r);if("error"in n)return 0;const o=n.find(s=>s.abbrev.toLowerCase()===i.toLowerCase()||s.name.toLowerCase()===i.toLowerCase());return o?o.chapters.length:0}async function A(e,i="static/bible/json"){const r=await B(e,i);return"error"in r?r:r.map(o=>({abbrev:o.abbrev,name:o.name}))}const R="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M19.5%2016.5L19.5%204.5L18.75%203.75H9L8.25%204.5L8.25%207.5L5.25%207.5L4.5%208.25V20.25L5.25%2021H15L15.75%2020.25V17.25H18.75L19.5%2016.5ZM15.75%2015.75L15.75%208.25L15%207.5L9.75%207.5V5.25L18%205.25V15.75H15.75ZM6%209L14.25%209L14.25%2019.5L6%2019.5L6%209Z'%20fill='gray'/%3e%3c/svg%3e",q="_copy_icon_g6dcx_1",U={copy_icon:q};var G=b('<img alt="Copy icon">');const J=e=>{function i(){navigator.clipboard.writeText(e.text)}return(()=>{var r=G();return r.$$click=i,r.addEventListener("dragstart",n=>n.preventDefault()),h(r,"src",R),f(()=>D(r,U.copy_icon)),r})()};z(["click"]);const K="_verseNumber_1w6gc_1",O="_selector_1w6gc_1",Q="_version_1w6gc_1",W="_center_1w6gc_1",X="_content_1w6gc_1",w={verseNumber:K,selector:O,version:Q,center:W,content:X};var Y=b("<p class=verse>"),p=b("<h1>"),ee=b("<div>"),re=b("<p>No verses found."),te=b('<div><div><img width=50px alt="Bible Logo"><br></div><div><select name=book></select><input type=number name=chapter min=1>'),ne=b("<option>"),oe=b("<button>Next Chapter."),ae=b("<div><main><article>"),se=b("<em>Loading..."),ie=b("<button>Read full chapter.");const S=e=>{const i=e.url?`${e.url}${e.number}`:`#${e.number}`;return(()=>{var r=Y();return v(r,l(j,{get class(){return w.verseNumber},href:i,onClick:()=>e.onClick?.(e.number),get children(){return e.number}}),null),v(r,()=>"    "+e.text+"    ",null),v(r,l(J,{get text(){return e.text}}),null),r})()},ce=e=>{const[i,r]=m();C(()=>{(async()=>{const o=await P(e.version,e.book,e.chapter);"error"in o?console.log("Erro em getBibleVerses():",o.error):r(o)})()});const n=[L(()=>i()?.book)," ",L(()=>e.chapter),L(()=>e.verse?`:${e.verse}`:"")," ",L(()=>e.version.toUpperCase())];return(()=>{var o=ee();return v(o,l(x,{get when(){return i()},get children(){return[l(M,{children:n}),(()=>{var s=p();return v(s,n),s})(),l(x,{get when(){return e.verse>0},get children(){return l(S,{get text(){return i().verses[e.verse-1]||"Verse not found."},get number(){return e.verse}})}}),l(x,{get when(){return e.verse===0},get children(){return l(T,{get each(){return i().verses},get fallback(){return re()},children:(s,c)=>l(S,{get number(){return c()+1},text:s,get url(){return`/bible-web/${e.version}/${e.book}/${e.chapter}/`},get onClick(){return e.onVerseClick}})})}})]}})),f(()=>h(o,"id",w.chapter)),o})()},le=e=>{const[i,r]=m([]),[n,o]=m(0);return C(()=>{(async()=>{const c=await A(e.version);if("error"in c)console.error("Error in getAllBooks():",c.error);else{r(c);const u=c.findIndex($=>$.abbrev===e.book);o(u>=0?u:0)}})()}),(()=>{var s=te(),c=s.firstChild,u=c.firstChild;u.nextSibling;var $=c.nextSibling,d=$.firstChild,k=d.nextSibling;return h(u,"src",F),v(c,l(j,{get href(){return`/bible-web/${e.version}/${n()}/${e.chapter}/${e.verse+"/"||""}select_version`},children:"Change version."}),null),d.addEventListener("change",a=>{const t=a.currentTarget.value;e.onchange(t)}),v(d,l(T,{get each(){return i()},children:a=>(()=>{var t=ne();return v(t,()=>a.name),f(()=>t.selected=e.book===a.abbrev),f(()=>t.value=a.abbrev),t})()})),k.addEventListener("change",a=>{const t=Number(a.currentTarget.value);!isNaN(t)&&t>=1&&t<=e.bookSize?e.onchange(void 0,t):a.currentTarget.value=e.chapter.toString()}),f(a=>{var t=w.selector,_=w.version,y=w.center,g=e.disabled,V=e.bookSize,E=e.disabled;return t!==a.e&&h(s,"id",a.e=t),_!==a.t&&h(c,"id",a.t=_),y!==a.a&&h($,"id",a.a=y),g!==a.o&&(d.disabled=a.o=g),V!==a.i&&h(k,"max",a.i=V),E!==a.n&&(k.disabled=a.n=E),a},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),f(()=>d.value=e.book),f(()=>k.value=e.chapter),s})()},ve=()=>{const e=H(),i=I(),[r]=m(e.version||"en_kjv"),[n,o]=m(""),[s,c]=m(Number(e.chapter)||1),[u,$]=m(Number(e.verse)||0),[d,k]=m(0);isNaN(Number(e.book))&&o(e.book||"gn"),C(async()=>{try{if(n()===""){const t=await A(r());"error"in t||o(t[Number(e.book)]?.abbrev)}else{const t=await Z(r(),n());k(t),t||console.error("Failed to fetch book size.")}}catch(t){console.error("Error:",t)}}),C(()=>{n()!==""&&i(`/bible-web/${r()}/${n()}/${s()}/${u()||""}`)});function a(t,_){t&&t!==n()?(o(t),c(1)):_&&c(_)}return l(x,{get when(){return n()!==""},get fallback(){return(()=>{var t=se();return t.style.setProperty("color","gray"),t})()},get children(){return[l(le,{get version(){return r()},get book(){return n()},get bookSize(){return d()},get chapter(){return s()},get verse(){return u()},onchange:a,get disabled(){return u()!==0}}),(()=>{var t=ae(),_=t.firstChild,y=_.firstChild;return v(y,l(ce,{get version(){return r()},get book(){return n()},get chapter(){return s()},get verse(){return u()},onVerseClick:$})),v(t,l(x,{get when(){return L(()=>typeof d()=="number"&&s()<d())()&&u()===0},get fallback(){return(()=>{var g=ie();return g.$$click=()=>$(0),g})()},get children(){var g=oe();return g.$$click=()=>c(s()+1),g}}),null),f(()=>h(t,"id",w.content)),t})()]}})};z(["click"]);export{ve as default};
