import{d as S,s as h,c as $,a as D,t as u,u as H,b as I,e as f,f as y,g as l,i as v,S as L,h as j,T as M,F as z}from"./index-sG2q5F6D.js";import{l as F,A as T}from"./logo-BnQolnSK.js";const C={};async function N(e,i){if(C[e])return C[e];const r=`/bible-web/${i}/${e}.json`;try{const n=await fetch(r);if(!n.ok)throw new Error(`Erro: ${n.status} ${n.statusText}`);const a=await n.json();return C[e]=a,a}catch(n){return console.error("Erro ao buscar dados da Bíblia:",n),console.log(r),{error:n instanceof Error?n.message:"Erro desconhecido ao buscar dados da Bíblia."}}}async function P(e,i,r,n="static/bible/json"){if(!e||!i||r<=0||!Number.isInteger(r))return{error:"Parâmetros inválidos. Verifique a versão, livro e capítulo."};const a=await N(e,n);if("error"in a)return a;const o=a.find(s=>s.abbrev===i);return o?r>o.chapters.length?{error:"Capítulo não encontrado."}:{book:o.name,verses:o.chapters[r-1]||[]}:{error:"Livro não encontrado."}}async function Z(e,i,r="static/bible/json"){const n=await N(e,r);if("error"in n)return 0;const a=n.find(o=>o.abbrev.toLowerCase()===i.toLowerCase()||o.name.toLowerCase()===i.toLowerCase());return a?a.chapters.length:0}async function A(e,i="static/bible/json"){const r=await N(e,i);return"error"in r?r:r.map(({abbrev:n,name:a})=>({abbrev:n,name:a}))}const R="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M19.5%2016.5L19.5%204.5L18.75%203.75H9L8.25%204.5L8.25%207.5L5.25%207.5L4.5%208.25V20.25L5.25%2021H15L15.75%2020.25V17.25H18.75L19.5%2016.5ZM15.75%2015.75L15.75%208.25L15%207.5L9.75%207.5V5.25L18%205.25V15.75H15.75ZM6%209L14.25%209L14.25%2019.5L6%2019.5L6%209Z'%20fill='gray'/%3e%3c/svg%3e",q="_copy_icon_jnwj3_1",U={copy_icon:q};var G=u('<img alt="Copy icon">');const J=e=>{function i(){navigator.clipboard.writeText(e.text)}return(()=>{var r=G();return r.$$click=i,r.addEventListener("dragstart",n=>n.preventDefault()),h(r,"src",R),$(()=>D(r,U.copy_icon)),r})()};S(["click"]);const K="_verseNumber_1w6gc_1",O="_selector_1w6gc_1",Q="_version_1w6gc_1",W="_center_1w6gc_1",X="_content_1w6gc_1",k={verseNumber:K,selector:O,version:Q,center:W,content:X};var Y=u("<p>"),p=u("<h1>"),ee=u("<div>"),re=u("<p>Nenhum verso encontrado."),te=u('<div><div><img width=50px alt="Bible Logo"><br></div><div><select name=book></select><input type=number name=chapter min=1>'),ne=u("<option>"),oe=u("<button>Next Chapter."),ae=u("<div><main><article>"),ie=u("<em>Loading..."),ce=u("<button>Read full chapter.");const E=e=>{const i=e.url?`${e.url}${e.number}`:`#${e.number}`;return(()=>{var r=Y();return v(r,l(T,{get class(){return k.verseNumber},href:i,onClick:()=>e.onClick?.(e.number),get children(){return e.number}}),null),v(r,()=>"    "+e.text+"    ",null),v(r,l(J,{get text(){return e.text}}),null),r})()},se=e=>{const[i,r]=f();y(()=>{(async()=>{const a=await P(e.version,e.book,e.chapter);"error"in a?console.error("Erro em getBibleVerses():",a.error):r(a)})()});const n=j(()=>`${i()?.book} ${e.chapter}${e.verse?`:${e.verse}`:""} ${e.version.toUpperCase()}`);return(()=>{var a=ee();return v(a,l(L,{get when(){return i()},get children(){return[l(M,{get children(){return n()}}),(()=>{var o=p();return v(o,n),o})(),l(L,{get when(){return e.verse>0},get children(){return l(E,{get text(){return i().verses[e.verse-1]||"Verso não encontrado."},get number(){return e.verse}})}}),l(L,{get when(){return e.verse===0},get children(){return l(z,{get each(){return i().verses},get fallback(){return re()},children:(o,s)=>l(E,{get number(){return s()+1},text:o,get url(){return`/bible-web/${e.version}/${e.book}/${e.chapter}/`},get onClick(){return e.onVerseClick}})})}})]}})),$(()=>h(a,"id",k.chapter)),a})()},le=e=>{const[i,r]=f([]),[n,a]=f(0);return y(()=>{(async()=>{const s=await A(e.version);"error"in s?console.error("Error in getAllBooks():",s.error):r(s)})()},[e.version]),y(()=>{const o=i().findIndex(s=>s.abbrev===e.book);a(o>=0?o:0)},[e.book,i]),(()=>{var o=te(),s=o.firstChild,b=s.firstChild;b.nextSibling;var w=s.nextSibling,d=w.firstChild,_=d.nextSibling;return h(b,"src",F),v(s,l(T,{get href(){return`/bible-web/${e.version}/${n()}/${e.chapter}/${e.verse+"/"||""}select_version`},children:"Change version."}),null),d.addEventListener("change",c=>{const t=c.currentTarget.value;e.onchange(t)}),v(d,l(z,{get each(){return i()},children:c=>(()=>{var t=ne();return v(t,()=>c.name),$(()=>t.selected=c.abbrev===e.book),$(()=>t.value=c.abbrev),t})()})),_.addEventListener("change",c=>{const t=Number(c.currentTarget.value);!isNaN(t)&&t>=1&&t<=e.bookSize?e.onchange(void 0,t):c.currentTarget.value=e.chapter.toString()}),$(c=>{var t=k.selector,m=k.version,x=k.center,g=e.disabled,B=e.bookSize,V=e.disabled;return t!==c.e&&h(o,"id",c.e=t),m!==c.t&&h(s,"id",c.t=m),x!==c.a&&h(w,"id",c.a=x),g!==c.o&&(d.disabled=c.o=g),B!==c.i&&h(_,"max",c.i=B),V!==c.n&&(_.disabled=c.n=V),c},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),$(()=>_.value=e.chapter),o})()},be=()=>{const e=H(),i=I(),[r]=f(e.version||"en_kjv"),[n,a]=f(""),[o,s]=f(Number(e.chapter)||1),[b,w]=f(Number(e.verse)||0),[d,_]=f(0);isNaN(Number(e.book))&&a(e.book||"gn"),y(async()=>{try{if(n()===""){const t=await A(r());"error"in t||a(t[Number(e.book)]?.abbrev)}else{const t=await Z(r(),n());_(t),t||console.error("Failed to fetch book size.")}}catch(t){console.error("Error:",t)}}),y(()=>{n()!==""&&i(`/bible-web/${r()}/${n()}/${o()}/${b()||""}`)},[n,o,b]);function c(t,m){t&&t!==n()?(a(t),s(1)):m&&s(m)}return l(L,{get when(){return n()!==""},get fallback(){return(()=>{var t=ie();return t.style.setProperty("color","gray"),t})()},get children(){return[l(le,{get version(){return r()},get book(){return n()},get bookSize(){return d()},get chapter(){return o()},get verse(){return b()},onchange:c,get disabled(){return b()!==0}}),(()=>{var t=ae(),m=t.firstChild,x=m.firstChild;return v(x,l(se,{get version(){return r()},get book(){return n()},get chapter(){return o()},get verse(){return b()},onVerseClick:w})),v(t,l(L,{get when(){return j(()=>typeof d()=="number"&&o()<d())()&&b()===0},get fallback(){return(()=>{var g=ce();return g.$$click=()=>w(0),g})()},get children(){var g=oe();return g.$$click=()=>s(o()+1),g}}),null),$(()=>h(t,"id",k.content)),t})()]}})};S(["click"]);export{be as default};
