import{d as y,c as g,a as w,s as f,b as N,t as v,e as C,f as B,g as u,T as F,i as d,S as _,F as R,u as J,h as A,j as H}from"./index-C-kfjfUm.js";import{A as z,l as P}from"./logo-DQvGm18m.js";const S=new Map;async function E(e,o){if(S.has(e))return S.get(e);const n=`/bible-web/${o}/${e}.json`;try{const r=await fetch(n);if(!r.ok)throw new Error(`Erro: ${r.status} ${r.statusText}`);const t=await r.json();return S.set(e,t),t}catch(r){return console.error("Erro ao buscar dados da Bíblia:",r),console.log(n),{error:r instanceof Error?r.message:"Erro desconhecido ao buscar dados da Bíblia."}}}async function U(e,o,n,r="static/bible/json"){if(!e||!o||n<=0||!Number.isInteger(n))return{error:"Parâmetros inválidos. Verifique a versão, livro e capítulo."};const t=await E(e,r);if("error"in t)return t;const a=t.find(c=>c.abbrev===o);return a?n>a.chapters.length?{error:`Capítulo ${n} não encontrado.`}:{book:a.name,verses:a.chapters[n-1]||[]}:{error:"Livro não encontrado."}}async function Z(e,o,n="static/bible/json"){const r=await E(e,n);if("error"in r)return 0;const t=r.find(a=>a.abbrev.toLowerCase()===o.toLowerCase()||a.name.toLowerCase()===o.toLowerCase());return t?t.chapters.length:0}async function D(e,o="static/bible/json"){const n=await E(e,o);return"error"in n?n:n.map(({abbrev:r,name:t})=>({abbrev:r,name:t}))}let O;function q(e,o,n){O={version:e,book:o,chapter:n}}function K(){const e=localStorage.getItem("lastChapterRead");return e?JSON.parse(e):{version:null,book:null,chapter:null}}window.addEventListener("beforeunload",()=>localStorage.setItem("lastChapterRead",JSON.stringify(O)));function M(e,o,n){return`${e}-${o}-${n}`}function W(e,o,n){const r=M(e,o,n),t=JSON.parse(localStorage.getItem("markedVerses")||"{}");t[r]=!0,localStorage.setItem("markedVerses",JSON.stringify(t))}function Y(e,o,n){const r=M(e,o,n),t=JSON.parse(localStorage.getItem("markedVerses")||"{}");t[r]?(delete t[r],localStorage.setItem("markedVerses",JSON.stringify(t))):console.error("Verse is not marked.")}function Q(e,o,n){const r=M(e,o,n);return!!JSON.parse(localStorage.getItem("markedVerses")||"{}")[r]}const X="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M19.5%2016.5L19.5%204.5L18.75%203.75H9L8.25%204.5L8.25%207.5L5.25%207.5L4.5%208.25V20.25L5.25%2021H15L15.75%2020.25V17.25H18.75L19.5%2016.5ZM15.75%2015.75L15.75%208.25L15%207.5L9.75%207.5V5.25L18%205.25V15.75H15.75ZM6%209L14.25%209L14.25%2019.5L6%2019.5L6%209Z'%20fill='gray'/%3e%3c/svg%3e",p="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='iso-8859-1'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20fill='%23000000'%20version='1.1'%20id='Capa_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='800px'%20height='800px'%20viewBox='0%200%20335.765%20335.765'%20xml:space='preserve'%3e%3cg%3e%3cg%3e%3cpolygon%20points='311.757,41.803%20107.573,245.96%2023.986,162.364%200,186.393%20107.573,293.962%20335.765,65.795%20'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",ee="_icon_pi8nl_1",j={icon:ee};var te=v('<img alt="Copy icon">');const re=e=>{const[o,n]=g(!1);function r(){navigator.clipboard.writeText(e.text).then(()=>{n(!0),setTimeout(()=>n(!1),2e3)})}return(()=>{var t=te();return t.$$click=r,t.addEventListener("dragstart",a=>a.preventDefault()),w(a=>{var c=o()?p:X,h=j.icon;return c!==a.e&&f(t,"src",a.e=c),h!==a.t&&N(t,a.t=h),a},{e:void 0,t:void 0}),t})()};y(["click"]);const ne="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20fill='gray'%20height='800px'%20width='800px'%20version='1.1'%20id='Icons'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20viewBox='0%200%2032%2032'%20xml:space='preserve'%3e%3cg%3e%3cpath%20d='M17.6,6L6.9,16.7c-0.2,0.2-0.3,0.4-0.3,0.6L6,23.9c0,0.3,0.1,0.6,0.3,0.8C6.5,24.9,6.7,25,7,25c0,0,0.1,0,0.1,0l6.6-0.6%20c0.2,0,0.5-0.1,0.6-0.3L25,13.4L17.6,6z'/%3e%3cpath%20d='M26.4,12l1.4-1.4c1.2-1.2,1.1-3.1-0.1-4.3l-3-3c-0.6-0.6-1.3-0.9-2.2-0.9c-0.8,0-1.6,0.3-2.2,0.9L19,4.6L26.4,12z'/%3e%3c/g%3e%3cg%3e%3cpath%20d='M28,29H4c-0.6,0-1-0.4-1-1s0.4-1,1-1h24c0.6,0,1,0.4,1,1S28.6,29,28,29z'/%3e%3c/g%3e%3c/svg%3e",oe="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M6.99486%207.00636C6.60433%207.39689%206.60433%208.03005%206.99486%208.42058L10.58%2012.0057L6.99486%2015.5909C6.60433%2015.9814%206.60433%2016.6146%206.99486%2017.0051C7.38538%2017.3956%208.01855%2017.3956%208.40907%2017.0051L11.9942%2013.4199L15.5794%2017.0051C15.9699%2017.3956%2016.6031%2017.3956%2016.9936%2017.0051C17.3841%2016.6146%2017.3841%2015.9814%2016.9936%2015.5909L13.4084%2012.0057L16.9936%208.42059C17.3841%208.03007%2017.3841%207.3969%2016.9936%207.00638C16.603%206.61585%2015.9699%206.61585%2015.5794%207.00638L11.9942%2010.5915L8.40907%207.00636C8.01855%206.61584%207.38538%206.61584%206.99486%207.00636Z'%20fill='%230F0F0F'/%3e%3c/svg%3e";var ae=v('<img alt="Marker icon">');const se=e=>{function o(){e.marked?Y(e.book,e.chapter,e.verse):W(e.book,e.chapter,e.verse)}return(()=>{var n=ae();return n.$$click=()=>{o(),e.onClick()},n.addEventListener("dragstart",r=>r.preventDefault()),w(r=>{var t=e.marked?oe:ne,a=j.icon;return t!==r.e&&f(n,"src",r.e=t),a!==r.t&&N(n,r.t=a),r},{e:void 0,t:void 0}),n})()};y(["click"]);const ce="_verseNumber_126qb_1",ie="_marked_126qb_11",I={verseNumber:ce,marked:ie};var le=v("<p><span>"),ue=v("<h1>"),ve=v("<p>Nenhum verso encontrado.");const G=e=>{const o=B(()=>e.url?`${e.url}${e.verse}`:`#${e.verse}`),[n,r]=g(Q(e.book,e.chapter,e.verse));return(()=>{var t=le(),a=t.firstChild;return d(a,u(z,{get class(){return I.verseNumber},get href(){return o()},onClick:()=>e.onClick?.(e.verse),get children(){return e.verse}}),null),d(a,()=>"    "+e.text+"    ",null),d(t,u(re,{get text(){return e.text}}),null),d(t,u(se,{get book(){return e.book},get chapter(){return e.chapter},get verse(){return e.verse},get marked(){return n()},onClick:()=>r(!n())}),null),w(()=>N(a,n()?I.marked:"")),t})()},ge=e=>{const[o,n]=g();C(()=>{(async()=>{const t=await U(e.version,e.book,e.chapter);"error"in t?(console.error(`Erro em getBibleVerses(${e.version}, ${e.book}, ${e.chapter}):`,t.error),console.log(t)):n(t)})()},[e.version,e.book,e.chapter]);const r=B(()=>`${o()?.book} ${e.chapter}${e.verse?`:${e.verse}`:""} ${e.version.toUpperCase()}`);return u(_,{get when(){return o()},get children(){return[u(F,{get children(){return r()}}),(()=>{var t=ue();return d(t,r),t})(),u(_,{get when(){return e.verse>0},get children(){return u(G,{get book(){return e.book},get chapter(){return e.chapter},get verse(){return e.verse},get text(){return o().verses[e.verse-1]||"Verse not found."},get url(){return`/bible-web/${e.version}/${e.book}/${e.chapter}/`},get onClick(){return e.onVerseClick}})}}),u(_,{get when(){return e.verse===0},get children(){return u(R,{get each(){return o().verses},get fallback(){return ve()},children:(t,a)=>u(G,{get book(){return e.book},get chapter(){return e.chapter},get verse(){return a()+1},text:t,get url(){return`/bible-web/${e.version}/${e.book}/${e.chapter}/`},get onClick(){return e.onVerseClick}})})}})]}})},de="_selector_1u1sa_1",he="_version_1u1sa_1",be="_center_1u1sa_1",me="_content_1u1sa_1",V={selector:de,version:he,center:be,content:me};var ke=v('<div><div><img width=50px alt="Bible Logo"><br></div><div><select name=book></select><input type=number name=chapter min=1>'),fe=v("<option>"),we=v("<button>Next chapter."),$e=v("<div><main><article>"),xe=v("<em>Carregando..."),_e=v("<button>Full chapter.");const Ce=e=>{const[o,n]=g([]),[r,t]=g(0);return C(()=>{(async()=>{const c=await D(e.version);"error"in c?console.error("Error in getAllBooks():",c.error):n(c)})()},[e.version]),C(()=>{const a=o().findIndex(c=>c.abbrev===e.book);t(a>=0?a:0)},[e.book,o]),(()=>{var a=ke(),c=a.firstChild,h=c.firstChild;h.nextSibling;var b=c.nextSibling,$=b.firstChild,m=$.nextSibling;return f(h,"src",P),d(c,u(z,{get href(){return`/bible-web/${e.version}/${r()}/${e.chapter}/${e.verse+"/"||""}select_version`},children:"Change version."}),null),$.addEventListener("change",s=>{const l=s.currentTarget.value;e.onchange(l)}),d($,u(R,{get each(){return o()},children:s=>(()=>{var l=fe();return d(l,()=>s.name),w(()=>l.selected=s.abbrev===e.book),w(()=>l.value=s.abbrev),l})()})),m.addEventListener("change",s=>{const l=Number(s.currentTarget.value);!isNaN(l)&&l>=1&&l<=e.bookSize?e.onchange(void 0,l):s.currentTarget.value=e.chapter.toString()}),w(s=>{var l=V.selector,i=V.version,x=V.center,L=e.disabled,k=e.bookSize,T=e.disabled;return l!==s.e&&f(a,"id",s.e=l),i!==s.t&&f(c,"id",s.t=i),x!==s.a&&f(b,"id",s.a=x),L!==s.o&&($.disabled=s.o=L),k!==s.i&&f(m,"max",s.i=k),T!==s.n&&(m.disabled=s.n=T),s},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),w(()=>m.value=e.chapter),a})()},Se=()=>{const e=J(),o=A(),n=K(),[r]=g(e.version||n.version||"en_kjv"),[t,a]=g(isNaN(Number(e.book))?e.book||n.book||"gn":""),[c,h]=g(Number(e.chapter)||n.chapter||1),[b,$]=g(Number(e.verse)||0),[m,s]=g(0);C(async()=>{try{if(t()===""){const i=await D(r());"error"in i||a(i[Number(e.book)]?.abbrev)}else{const i=await Z(r(),t());s(i),i||console.error("Falha ao buscar o tamanho do livro.")}}catch(i){console.error("Erro:",i)}},[r,t]),C(()=>{t()!==""&&(o(`/bible-web/${r()}/${t()}/${c()}/${b()||""}`),q(r(),t(),c()))},[r,t,c,b]);function l(i,x){H(()=>{x&&h(x),i&&(a(i),h(1))})}return u(_,{get when(){return t()!==""},get fallback(){return(()=>{var i=xe();return i.style.setProperty("color","gray"),i})()},get children(){return[u(Ce,{get version(){return r()},get book(){return t()},get bookSize(){return m()},get chapter(){return c()},get verse(){return b()},onchange:l,get disabled(){return b()!==0}}),(()=>{var i=$e(),x=i.firstChild,L=x.firstChild;return d(L,u(ge,{get version(){return r()},get book(){return t()},get chapter(){return c()},get verse(){return b()},onVerseClick:$})),d(i,u(_,{get when(){return B(()=>typeof m()=="number"&&c()<m())()&&b()===0},get fallback(){return(()=>{var k=_e();return k.$$click=()=>$(0),k})()},get children(){var k=we();return k.$$click=()=>h(c()+1),k}}),null),w(()=>f(i,"id",V.content)),i})()]}})};y(["click"]);export{Se as default};
