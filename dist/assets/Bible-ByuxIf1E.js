import{d as S,s as h,c as f,a as D,t as v,u as H,b as I,e as m,f as x,g as l,i as b,S as L,h as j,T as M,F as z}from"./index-dZ6xeCyd.js";import{l as F,A as T}from"./logo-BW5AO1FT.js";const C={};async function N(e,c){if(C[e])return C[e];const r=`/bible-web/${c}/${e}.json`;try{const n=await fetch(r);if(!n.ok)throw new Error(`Erro: ${n.status} ${n.statusText}`);const o=await n.json();return C[e]=o,o}catch(n){return console.error("Erro ao buscar dados da Bíblia:",n),console.log(r),{error:n instanceof Error?n.message:"Erro desconhecido ao buscar dados da Bíblia."}}}async function P(e,c,r,n="static/bible/json"){if(!e||!c||r<=0||!Number.isInteger(r))return{error:"Parâmetros inválidos. Verifique a versão, livro e capítulo."};const o=await N(e,n);if("error"in o)return o;const a=o.find(s=>s.abbrev===c);return a?r>a.chapters.length?{error:"Capítulo não encontrado."}:{book:a.name,verses:a.chapters[r-1]||[]}:{error:"Livro não encontrado."}}async function Z(e,c,r="static/bible/json"){const n=await N(e,r);if("error"in n)return 0;const o=n.find(a=>a.abbrev.toLowerCase()===c.toLowerCase()||a.name.toLowerCase()===c.toLowerCase());return o?o.chapters.length:0}async function A(e,c="static/bible/json"){const r=await N(e,c);return"error"in r?r:r.map(({abbrev:n,name:o})=>({abbrev:n,name:o}))}const R="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M19.5%2016.5L19.5%204.5L18.75%203.75H9L8.25%204.5L8.25%207.5L5.25%207.5L4.5%208.25V20.25L5.25%2021H15L15.75%2020.25V17.25H18.75L19.5%2016.5ZM15.75%2015.75L15.75%208.25L15%207.5L9.75%207.5V5.25L18%205.25V15.75H15.75ZM6%209L14.25%209L14.25%2019.5L6%2019.5L6%209Z'%20fill='gray'/%3e%3c/svg%3e",q="_copy_icon_jnwj3_1",U={copy_icon:q};var G=v('<img alt="Copy icon">');const J=e=>{function c(){navigator.clipboard.writeText(e.text)}return(()=>{var r=G();return r.$$click=c,r.addEventListener("dragstart",n=>n.preventDefault()),h(r,"src",R),f(()=>D(r,U.copy_icon)),r})()};S(["click"]);const K="_verseNumber_1w6gc_1",O="_selector_1w6gc_1",Q="_version_1w6gc_1",W="_center_1w6gc_1",X="_content_1w6gc_1",w={verseNumber:K,selector:O,version:Q,center:W,content:X};var Y=v("<p>"),p=v("<h1>"),ee=v("<div>"),re=v("<p>Nenhum verso encontrado."),te=v('<div><div><img width=50px alt="Bible Logo"><br></div><div><select name=book></select><input type=number name=chapter min=1>'),ne=v("<option>"),oe=v("<button>Next Chapter."),ae=v("<div><main><article>"),ie=v("<em>Loading..."),ce=v("<button>Read full chapter.");const E=e=>{const c=e.url?`${e.url}${e.number}`:`#${e.number}`;return(()=>{var r=Y();return b(r,l(T,{get class(){return w.verseNumber},href:c,onClick:()=>e.onClick?.(e.number),get children(){return e.number}}),null),b(r,()=>"    "+e.text+"    ",null),b(r,l(J,{get text(){return e.text}}),null),r})()},se=e=>{const[c,r]=m();x(()=>{(async()=>{const o=await P(e.version,e.book,e.chapter);"error"in o?console.error("Erro em getBibleVerses():",o.error):r(o)})()});const n=j(()=>`${c()?.book} ${e.chapter}${e.verse?`:${e.verse}`:""} ${e.version.toUpperCase()}`);return(()=>{var o=ee();return b(o,l(L,{get when(){return c()},get children(){return[l(M,{get children(){return n()}}),(()=>{var a=p();return b(a,n),a})(),l(L,{get when(){return e.verse>0},get children(){return l(E,{get text(){return c().verses[e.verse-1]||"Verso não encontrado."},get number(){return e.verse}})}}),l(L,{get when(){return e.verse===0},get children(){return l(z,{get each(){return c().verses},get fallback(){return re()},children:(a,s)=>l(E,{get number(){return s()+1},text:a,get url(){return`/bible-web/${e.version}/${e.book}/${e.chapter}/`},get onClick(){return e.onVerseClick}})})}})]}})),f(()=>h(o,"id",w.chapter)),o})()},le=e=>{const[c,r]=m([]),[n,o]=m(0);return x(()=>{(async()=>{const s=await A(e.version);if("error"in s)console.error("Error in getAllBooks():",s.error);else{r(s);const u=s.findIndex($=>$.abbrev===e.book);o(u>=0?u:0)}})()}),(()=>{var a=te(),s=a.firstChild,u=s.firstChild;u.nextSibling;var $=s.nextSibling,d=$.firstChild,k=d.nextSibling;return h(u,"src",F),b(s,l(T,{get href(){return`/bible-web/${e.version}/${n()}/${e.chapter}/${e.verse+"/"||""}select_version`},children:"Change version."}),null),d.addEventListener("change",i=>{const t=i.currentTarget.value;e.onchange(t)}),b(d,l(z,{get each(){return c()},children:i=>(()=>{var t=ne();return b(t,()=>i.name),f(()=>t.selected=e.book===i.abbrev),f(()=>t.value=i.abbrev),t})()})),k.addEventListener("change",i=>{const t=Number(i.currentTarget.value);!isNaN(t)&&t>=1&&t<=e.bookSize?e.onchange(void 0,t):i.currentTarget.value=e.chapter.toString()}),f(i=>{var t=w.selector,_=w.version,y=w.center,g=e.disabled,B=e.bookSize,V=e.disabled;return t!==i.e&&h(a,"id",i.e=t),_!==i.t&&h(s,"id",i.t=_),y!==i.a&&h($,"id",i.a=y),g!==i.o&&(d.disabled=i.o=g),B!==i.i&&h(k,"max",i.i=B),V!==i.n&&(k.disabled=i.n=V),i},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),f(()=>d.value=e.book),f(()=>k.value=e.chapter),a})()},be=()=>{const e=H(),c=I(),[r]=m(e.version||"en_kjv"),[n,o]=m(""),[a,s]=m(Number(e.chapter)||1),[u,$]=m(Number(e.verse)||0),[d,k]=m(0);isNaN(Number(e.book))&&o(e.book||"gn"),x(async()=>{try{if(n()===""){const t=await A(r());"error"in t||o(t[Number(e.book)]?.abbrev)}else{const t=await Z(r(),n());k(t),t||console.error("Failed to fetch book size.")}}catch(t){console.error("Error:",t)}}),x(()=>{n()!==""&&c(`/bible-web/${r()}/${n()}/${a()}/${u()||""}`)},[n,a,u]);function i(t,_){t&&t!==n()?(o(t),s(1)):_&&s(_)}return l(L,{get when(){return n()!==""},get fallback(){return(()=>{var t=ie();return t.style.setProperty("color","gray"),t})()},get children(){return[l(le,{get version(){return r()},get book(){return n()},get bookSize(){return d()},get chapter(){return a()},get verse(){return u()},onchange:i,get disabled(){return u()!==0}}),(()=>{var t=ae(),_=t.firstChild,y=_.firstChild;return b(y,l(se,{get version(){return r()},get book(){return n()},get chapter(){return a()},get verse(){return u()},onVerseClick:$})),b(t,l(L,{get when(){return j(()=>typeof d()=="number"&&a()<d())()&&u()===0},get fallback(){return(()=>{var g=ce();return g.$$click=()=>$(0),g})()},get children(){var g=oe();return g.$$click=()=>s(a()+1),g}}),null),f(()=>h(t,"id",w.content)),t})()]}})};S(["click"]);export{be as default};
